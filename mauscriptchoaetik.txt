-- âœ… MáºªU CHUáº¨N CHO NGÆ¯á»œI Má»šI | TÃ‰O HUB ðŸŽ
-- Giá»¯ nguyÃªn giao diá»‡n tháº­t, chá»‰ thÃªm hÆ°á»›ng dáº«n ðŸ‘ˆ ngay bÃªn cáº¡nh dÃ²ng cáº§n sá»­a

repeat task.wait() until game:IsLoaded()

-- ðŸŸ¢ NÃºt má»Ÿ menu chÃ­nh
local ScreenGui = Instance.new("ScreenGui")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

ImageButton.Parent = ScreenGui
ImageButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ImageButton.BorderSizePixel = 0
ImageButton.Position = UDim2.new(0.10615778, 0, 0.16217947, 0)
ImageButton.Size = UDim2.new(0, 40, 0, 40)
ImageButton.Draggable = true
ImageButton.Image = "http://www.roblox.com/asset/?id=93569596173570 "  -- ðŸ‘ˆ Ä‘á»•i ID áº£nh nÃºt má»Ÿ menu táº¡i Ä‘Ã¢y (áº£nh roblox)

UICorner.CornerRadius = UDim.new(1, 10)
UICorner.Parent = ImageButton

ImageButton.MouseButton1Down:Connect(function()
	game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.End, false, game)
end)

-- ðŸŸ£ Giao diá»‡n Fluent
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
repeat wait() until game:IsLoaded()

-- ðŸªŸ Cá»­a sá»• chÃ­nh
local Window = Fluent:CreateWindow({
	Title = "ðŸ’€Máº¥t Quyá»n Truy Cáº­p ",         -- ðŸ‘ˆ Ä‘á»•i thÃ nh tÃªn script cá»§a báº¡n
	SubTitle = "XpHub",              -- ðŸ‘ˆ Ä‘á»•i mÃ´ táº£ phá»¥
	TabWidth = 157,
	Size = UDim2.fromOffset(450, 300),
	Acrylic = true,
	Theme = "Amethyst",                   -- ðŸ‘ˆ Ä‘á»•i mÃ u chá»§ Ä‘áº¡o: Amethyst, Dark, Aqua, Light,...
	MinimizeKey = Enum.KeyCode.End
})

-- ðŸ“‘ CÃ¡c tab (má»¥c chÃ­nh)
local Tabs = {
	Main0 = Window:AddTab({ Title = "Má»™t Sá»‘ KÃªnhðŸ¤“" }),  -- ðŸ‘ˆ Ä‘á»•i tÃªn tab 1
	Main1 = Window:AddTab({ Title = "FARM MONEYðŸ’µ" }),  -- ðŸ‘ˆ Ä‘á»•i tÃªn tab 2
	Main2 = Window:AddTab({ Title = "FARM BOSSðŸ—¿" }),     -- ðŸ‘ˆ Ä‘á»•i tÃªn tab 3
	Main3 = Window:AddTab({ Title = "SHOP ðŸ’²" }),        -- ðŸ‘ˆ Ä‘á»•i tÃªn tab 4
	Main4 = Window:AddTab({ Title = "PVPâš”ï¸" }),    -- ðŸ‘ˆ Ä‘á»•i tÃªn tab 5
	Main5 = Window:AddTab({ Title = "Farm NPC" }) -- ðŸ‘ˆ Ä‘á»•i tÃªn tab 6
}

------------------------------------------------
-- TAB 1: CÃ¡c kÃªnh tiktok
------------------------------------------------
Tabs.Main0:AddButton({
	Title = "@xun.quyn15",              -- ðŸ‘ˆ tÃªn nÃºt
	Description = "Nháº¥n vÃ o Ä‘á»ƒ sao chÃ©p link Tik Tok  ",-- ðŸ‘ˆ mÃ´ táº£ nÃºt
	Callback = function()
		setclipboard("https://www.tiktok.com/@xun.quyn15?_r=1&_t=ZS-91pwZ8A7SQa ")  -- ðŸ‘ˆ link sao chÃ©p
	end
})

Tabs.Main0:AddButton({
	Title = "tiktok",
	Description = "fl tiktok Ä‘á»ƒ biáº¿t thÃªm nhiá»u script",
	Callback = function()
		setclipboard("https://www.tiktok.com/@xun.quyn15?_r=1&_t=ZS-91pwZ8A7SQa ")
	end
})

------------------------------------------------
-- TAB 2: VÃ­ dá»¥ thÃªm script
------------------------------------------------
Tabs.Main1:AddButton({
	Title = "MQKSðŸ’€",                         
   -- MoneySystem (Server)
local DataStoreService = game:GetService("DataStoreService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local moneyStore = DataStoreService:GetDataStore("PlayerMoney_v1") -- thay Ä‘á»•i náº¿u cáº§n
local SAVE_INTERVAL = 60 -- giÃ¢y (tá»± Ä‘á»™ng save má»—i n giÃ¢y)
local DEFAULT_MONEY = 0

-- Cáº¥u hÃ¬nh farm zone: tÃªn Part trong Workspace
local ZONE_NAME = "FarmZone"
local zonePart = workspace:FindFirstChild(ZONE_NAME)

-- Sá»‘ tiá»n má»—i giÃ¢y khi á»Ÿ trong zone
local MONEY_PER_SECOND_IN_ZONE = 10

-- Theo dÃµi ngÆ°á»i chÆ¡i Ä‘ang á»Ÿ trong zone
local playersInZone = {} -- [player] = true

-- Táº¡o leaderstats vÃ  load data
local function setupPlayer(player)
	-- leaderstats
	local leaderstats = Instance.new("Folder")
	leaderstats.Name = "leaderstats"
	leaderstats.Parent = player

	local money = Instance.new("IntValue")
	money.Name = "Money"
	money.Value = DEFAULT_MONEY
	money.Parent = leaderstats

	-- load tá»« DataStore (pcall)
	spawn(function()
		local success, stored = pcall(function()
			return moneyStore:GetAsync("money_" .. player.UserId)
		end)
		if success and type(stored) == "number" then
			money.Value = stored
		end
	end)
end

-- Save function
local function savePlayerMoney(player)
	if not player or not player.Parent then return end
	local moneyValue = player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Money")
	if moneyValue then
		local key = "money_" .. player.UserId
		local ok, err = pcall(function()
			moneyStore:SetAsync(key, moneyValue.Value)
		end)
		if not ok then
			warn("Save failed for", player.Name, err)
		end
	end
end

-- Periodic autosave for all players
spawn(function()
	while true do
		wait(SAVE_INTERVAL)
		for _, player in pairs(Players:GetPlayers()) do
			savePlayerMoney(player)
		end
	end
end)

-- When player added/removed
Players.PlayerAdded:Connect(function(player)
	setupPlayer(player)
end)

Players.PlayerRemoving:Connect(function(player)
	savePlayerMoney(player)
	playersInZone[player] = nil
end)

-- Zone detection using Touched/TouchEnded (works well if FarmZone is a big part)
if zonePart then
	-- keep track of touched humanoids -> player mapping
	local touching = {} -- [part] = true to help reduce duplicates

	zonePart.Touched:Connect(function(hit)
		local character = hit.Parent
		if not character then return end
		local player = Players:GetPlayerFromCharacter(character)
		if player then
			playersInZone[player] = true
		end
	end)

	-- TouchEnded may be unreliable for some setups; add check via heartbeat to clear players too far away
	zonePart.TouchEnded:Connect(function(hit)
		local character = hit.Parent
		if not character then return end
		local player = Players:GetPlayerFromCharacter(character)
		if player then
			-- slight delay then check if still inside (to avoid flicker)
			delay(0.2, function()
				if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
					local hrp = player.Character.HumanoidRootPart
					if (hrp.Position - zonePart.Position).Magnitude > (zonePart.Size.Magnitude) * 1.5 then
						playersInZone[player] = nil
					end
				else
					playersInZone[player] = nil
				end
			end)
		end
	end)
else
	warn("KhÃ´ng tÃ¬m tháº¥y FarmZone trong Workspace. HÃ£y táº¡o Part tÃªn 'FarmZone'")
end

-- Add money every second for players in zone
RunService.Heartbeat:Connect(function(dt)
	-- accumulate dt to 1-second ticks or use dt for fractional
	-- simple method: give MONEY_PER_SECOND_IN_ZONE * dt
	for player, _ in pairs(playersInZone) do
		if player and player.Parent then
			local moneyValue = player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Money")
			local character = player.Character
			local hrp = character and character:FindFirstChild("HumanoidRootPart")
			-- verify still actually inside box (optional robust check)
			local inZone = false
			if hrp and zonePart then
				local p = hrp.Position
				local zPos = zonePart.Position
				local size = zonePart.Size
				local offset = p - zPos
				-- axis-aligned box check
				if math.abs(offset.X) <= size.X/2 and math.abs(offset.Y) <= size.Y/2 and math.abs(offset.Z) <= size.Z/2 then
					inZone = true
				end
			end

			if inZone and moneyValue then
				-- award scaled by dt
				local gain = MONEY_PER_SECOND_IN_ZONE * dt
				-- as IntValue, add math.floor to prevent tiny fractions accumulating visually (you can accumulate in a temp var)
				moneyValue.Value = moneyValue.Value + math.floor(gain + 0.5)
			else
				playersInZone[player] = nil
			end
		else
			playersInZone[player] = nil
		end
	end
end)
-- Simple AFK detection + reward (Server)
local Players = game:GetService("Players")
local AFK_SECONDS_THRESHOLD = 60 -- sau 60s Ä‘á»©ng yÃªn Ä‘Æ°á»£c coi AFK
local AFK_REWARD = 50 -- tiá»n thÆ°á»Ÿng khi Ä‘Æ°á»£c coi AFK (tÃ¹y chá»‰nh)
local CHECK_INTERVAL = 5

local playerPositions = {} -- [player] = {lastPos = Vector3, lastMoveTime = os.time()}

Players.PlayerAdded:Connect(function(player)
	playerPositions[player] = {lastPos = nil, lastMoveTime = os.time()}
end)

Players.PlayerRemoving:Connect(function(player)
	playerPositions[player] = nil
end)

game:GetService("RunService").Heartbeat:Connect(function()
	-- update player last position (sample rate low-cost)
	for _, player in pairs(Players:GetPlayers()) do
		local posData = playerPositions[player]
		if posData and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			local hrp = player.Character.HumanoidRootPart
			local current = hrp.Position
			if posData.lastPos then
				if (current - posData.lastPos).Magnitude > 1 then
					-- considered moved
					posData.lastMoveTime = os.time()
				end
			else
				posData.lastMoveTime = os.time()
			end
			posData.lastPos = current
		end
	end
end)

-- Periodic check to reward AFK (example, only reward once per threshold)
spawn(function()
	while true do
		wait(CHECK_INTERVAL)
		for _, player in pairs(Players:GetPlayers()) do
			local posData = playerPositions[player]
			if posData and player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Money") then
				local idle = os.time() - posData.lastMoveTime
				if idle >= AFK_SECONDS_THRESHOLD then
					-- give reward and reset timer (or reduce frequency)
					player.leaderstats.Money.Value = player.leaderstats.Money.Value + AFK_REWARD
					-- move lastMoveTime forward so reward won't spam every check
					posData.lastMoveTime = os.time()
				end
			end
		end
	end
end)
-- Local: show money
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")
local moneyLabel = nil

-- náº¿u báº¡n táº¡o trá»±c tiáº¿p trong StarterGui, thay báº±ng path tá»›i MoneyLabel
-- vÃ­ dá»¥ gui.ScreenGui.MoneyLabel

-- tÃ¬m theo tÃªn
local function findLabel()
	for _, g in pairs(player:WaitForChild("PlayerGui"):GetChildren()) do
		if g:FindFirstChild("MoneyLabel") and g.Name == "ScreenGui" then
			return g.MoneyLabel
		end
	end
	-- fallback: náº¿u báº¡n táº¡o ScreenGui named "MoneyGui" cÃ³ MoneyLabel:
	local g = player.PlayerGui:FindFirstChild("MoneyGui")
	if g then
		return g:FindFirstChild("MoneyLabel")
	end
	return nil
end

moneyLabel = findLabel()

-- Thay báº±ng event update khi giÃ¡ trá»‹ thay Ä‘á»•i:
if player:FindFirstChild("leaderstats") then
	local money = player.leaderstats:WaitForChild("Money")
	if not moneyLabel then
		-- táº¡o label táº¡m náº¿u khÃ´ng cÃ³
		local screenGui = Instance.new("ScreenGui", player.PlayerGui)
		screenGui.Name = "MoneyGui"
		local label = Instance.new("TextLabel", screenGui)
		label.Name = "MoneyLabel"
		label.Size = UDim2.new(0,200,0,50)
		label.Position = UDim2.new(0,10,0,10)
		label.TextScaled = true
		moneyLabel = label
	end

	local function update()
		if moneyLabel then
			moneyLabel.Text = "Money: "..tostring(money.Value)
		end
	end

	update()
	money.Changed:Connect(update)
end
})

Tabs.Main2:AddButton({
	Title = "MQKSðŸ’€",                             -- ðŸ‘ˆ tÃªn nÃºt hiá»ƒn thá»‹
	Description = "script nÃ y ngon Ã¡ Ä‘á»§ chá»©c nÄƒng cáº£ðŸ˜ƒ",-- ðŸ‘ˆ mÃ´ táº£
	Callback = function()
		local Settings = {
			JoinTeam = "Pirates";   -- ðŸ‘ˆ team máº·c Ä‘á»‹nh: Pirates hoáº·c Marines
			Translator = true;      -- ðŸ‘ˆ báº­t dá»‹ch sang tiáº¿ng Viá»‡t náº¿u cÃ³
		}
		loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))() -- ðŸ‘ˆ link script táº£i
	end
})

Tabs.Main3:AddButton({
	Title = "MQKSðŸ’€",                         
   -- =================================
   -- MENU 1: FARM MONEY
   -- =================================
   local moneyTab = Window: MakeTab({
    Name = "FARM MONEY",
    Icon = "rbxassetid://6023426923"
})
     money Tab: AddToggle({
     Name = "Auto Farm Money",
     Default = false,
     Callback = function(x)
   AutoFarmMoney = x
     if x then
      task.spawn (FarmMoney)

      end

   end

}) 
loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))() -- ðŸ‘ˆ link script táº£i
	end
})